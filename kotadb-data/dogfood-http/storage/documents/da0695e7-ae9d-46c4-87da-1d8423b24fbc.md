---
tags:
- file
- kota-db
- ext_md
---
# KotaDB Migration Guide: Document Database → Codebase Intelligence

## Overview

KotaDB has evolved from a general-purpose document database to a specialized codebase intelligence platform. This guide helps existing users migrate to the new system.

## What Changed?

### Removed Features
The following document-specific commands have been removed:
- `insert` - Document insertion
- `update` - Document updates  
- `delete` - Document deletion
- `get` - Retrieving individual documents
- `list` - Listing all documents

### New Features
Powerful codebase intelligence commands have been added:
- `index-codebase` - Index a repository with symbol extraction
- `search-code` - Search for code patterns and symbols
- `search-symbols` - Find functions, classes, variables by name
- `find-callers` - Find all references to a symbol
- `analyze-impact` - Understand what breaks if you change something
- `symbol-stats` - View extracted symbol statistics

### Renamed Commands
- `ingest-repo` → `index-codebase` (better clarity)
- `search` → `search-code` (specific to code search)
- `impact-analysis` → `analyze-impact` (consistency)

## Migration Steps

### 1. Update Your Installation

#### Python Client
```bash
pip install --upgrade kotadb-client
```

#### TypeScript/JavaScript Client
```bash
npm update kotadb-client
```

#### Rust Binary
```bash
cargo install --force kotadb
```

### 2. Update Your Code

#### Python Migration

**Before (Document Operations):**
```python
from kotadb import KotaDB, DocumentBuilder

db = KotaDB("http://localhost:8080")

# Old document creation
doc_id = db.insert_with_builder(
    DocumentBuilder()
    .path("/notes/meeting.md")
    .title("Team Meeting")
    .content("Meeting notes...")
    .add_tag("meeting")
)

# Old search
results = db.query("meeting notes")
```

**After (Codebase Intelligence):**
```python
from kotadb import KotaDB

db = KotaDB("http://localhost:8080")

# Index your codebase
stats = db.index_codebase("/path/to/project")
print(f"Indexed {stats['symbols']} symbols")

# Search for code
results = db.search_code("authentication")

# Find dependencies
callers = db.find_callers("process_data")

# Analyze impact
impact = db.analyze_impact("DatabaseConnection")
```

#### TypeScript Migration

**Before (Document Operations):**
```typescript
import { KotaDB, DocumentBuilder } from 'kotadb-client';

const db = new KotaDB({ url: 'http://localhost:8080' });

// Old document creation
const docId = await db.insertWithBuilder(
  new DocumentBuilder()
    .path("/notes/meeting.md")
    .title("Team Meeting")
    .content("Meeting notes...")
);

// Old search
const results = await db.query("meeting notes");
```

**After (Codebase Intelligence):**
```typescript
import { KotaDB } from 'kotadb-client';

const db = new KotaDB({ url: 'http://localhost:8080' });

// Index your codebase
const stats = await db.indexCodebase('/path/to/project');
console.log(`Indexed ${stats.symbols} symbols`);

// Search for code
const results = await db.searchCode('authentication');

// Find dependencies
const callers = await db.findCallers('processData');

// Analyze impact
const impact = await db.analyzeImpact('DatabaseConnection');
```

### 3. Data Migration

If you have existing documents in KotaDB that you need to preserve:

#### Option A: Export as Markdown Files
```bash
# Export all documents to markdown files
for doc in $(kotadb list --format json | jq -r '.[].id'); do
  kotadb get "$doc" > "exported_$doc.md"
done
```

#### Option B: Use Alternative Storage
Consider migrating document storage needs to:
- **Obsidian** - For personal knowledge management
- **Notion** - For team documentation
- **GitHub Wiki** - For project documentation
- **Traditional databases** - For structured data

### 4. Update Configuration Files

#### MCP Configuration
Update your `kotadb-mcp-dev.toml`:

**Before:**
```toml
enable_document_tools = true
enable_search_tools = true
```

**After:**
```toml
enable_codebase_tools = true
enable_symbol_tools = true
enable_search_tools = true
enable_analysis_tools = true
```

#### Claude Desktop Configuration
If using with Claude Desktop, update available tools:

**Before:**
```json
{
  "tools": [
    "kotadb_document_create",
    "kotadb_document_update",
    "kotadb_search"
  ]
}
```

**After:**
```json
{
  "tools": [
    "kotadb_index_codebase",
    "kotadb_search_code",
    "kotadb_find_callers",
    "kotadb_analyze_impact"
  ]
}
```

## FAQ

### Q: Why was document management removed?
A: KotaDB is focusing on becoming the best codebase intelligence platform. General document management is better served by purpose-built tools.

### Q: Can I still store documentation?
A: KotaDB now focuses on code analysis. For documentation, consider using specialized tools like Obsidian, Notion, or markdown files in your repository.

### Q: Will document features return?
A: No. The project is committed to codebase intelligence. This focused approach enables better performance and more specialized features.

### Q: What about my existing data?
A: Export your documents using the legacy version before upgrading, or maintain a separate instance of the old version if needed.

### Q: Is this breaking change versioned?
A: Yes, this is released as version 0.6.0 following semantic versioning. The 0.5.x series was the last to support document operations.

## Getting Help

- **GitHub Issues**: Report problems at https://github.com/jayminwest/kota-db/issues
- **Documentation**: Updated docs at https://jayminwest.github.io/kota-db/
- **Examples**: See `/examples` directory for code intelligence use cases

## Benefits of the New System

### For Developers
- **Faster refactoring**: Understand impact before making changes
- **Better code navigation**: Find all usages instantly
- **Dependency tracking**: See how code components relate

### For AI Assistants
- **Contextual understanding**: AI can understand your codebase structure
- **Safer suggestions**: AI knows what might break
- **Intelligent search**: Find relevant code quickly

### Performance Improvements
- **10x faster symbol search**: Optimized for code patterns
- **Real-time analysis**: Sub-10ms impact queries
- **Scalable**: Handle repositories with 100K+ files

## Summary

KotaDB's transition to codebase intelligence represents a strategic focus on solving one problem exceptionally well rather than many problems adequately. The new system provides powerful tools for understanding, navigating, and safely modifying code.

For users who need document management, we recommend:
1. Export your existing documents
2. Migrate to a specialized document management tool
3. Use KotaDB for what it does best: codebase intelligence

Thank you for your understanding and continued support as KotaDB evolves to better serve the developer community.